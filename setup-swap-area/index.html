
<!DOCTYPE doctype html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="ie=edge" http-equiv="x-ua-compatible"/>
<link href="https://wiki.ravanos.org/setup-swap-area/" rel="canonical"/>
<meta content="Copy to clipboard" name="lang:clipboard.copy"/>
<meta content="Copied to clipboard" name="lang:clipboard.copied"/>
<meta content="en" name="lang:search.language"/>
<meta content="True" name="lang:search.pipeline.stopwords"/>
<meta content="True" name="lang:search.pipeline.trimmer"/>
<meta content="No matching documents" name="lang:search.result.none"/>
<meta content="1 matching document" name="lang:search.result.one"/>
<meta content="# matching documents" name="lang:search.result.other"/>
<meta content="[\s\-]+" name="lang:search.tokenizer"/>
<link href="../images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.0.4, mkdocs-material-4.0.2" name="generator"/>
<title>Setup Swap Area - RAVANOS Documentation</title>
<link href="../assets/stylesheets/application.982221ab.css" rel="stylesheet"/>
<link href="../assets/stylesheets/application-palette.224b79ff.css" rel="stylesheet"/>
<meta content="#2196f3" name="theme-color"/>
<script src="../assets/javascripts/modernizr.1f0bcf2b.js"></script>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono" rel="stylesheet"/>
<style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
<link href="../assets/fonts/material-icons.css" rel="stylesheet"/>
<link href="../extra.css" rel="stylesheet"/>
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-136239070-1", "wiki.ravanos.org")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
</head>
<body data-md-color-accent="blue" data-md-color-primary="blue" dir="ltr">
<svg class="md-svg">
<defs>
<svg height="448" id="__github" viewbox="0 0 416 448" width="416" xmlns="http://www.w3.org/2000/svg">
<path d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" fill="currentColor"></path>
</svg>
</defs>
</svg>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<a class="md-skip" href="#create-a-1gb-file" tabindex="1">
        Skip to content
      </a>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a class="md-header-nav__button md-logo" href="https://wiki.ravanos.org/" title="RAVANOS Documentation">
<img height="24" src="../images/ravanoslogo.png" width="24"/>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
              RAVANOS Documentation
            </span>
<span class="md-header-nav__topic">
              Setup Swap Area
            </span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/ravanos/ravanos-wiki/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    ravanos/ravanos.github.io
  </div>
</a>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title md-nav__title--site" for="__drawer">
<a class="md-nav__button md-logo" href="https://wiki.ravanos.org/" title="RAVANOS Documentation">
<img height="48" src="../images/ravanoslogo.png" width="48"/>
</a>
    RAVANOS Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/ravanos/ravanos-wiki/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    ravanos/ravanos.github.io
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href=".." title="RavanOS Common Linux Edition">
      RavanOS Common Linux Edition
    </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-toggle md-nav__toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Installation, configuration, maintenance OS
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-2">
        Installation, configuration, maintenance OS
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../os-installation-guide/" title="OS Installation Guide">
      OS Installation Guide
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ravanos-cle-updates/" title="RavanOS CLE Updates">
      RavanOS CLE Updates
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../create-ravanos-bootable-USB-flash-drive.md" title="Create RavanOS Bootable USB Flash Drive">
      Create RavanOS Bootable USB Flash Drive
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ravanos-secure-boot-mode.md" title="RavanOS Secure Boot Mode">
      RavanOS Secure Boot Mode
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../list-of-packages-in-the-distribution/" title="List of Packages in the Distribution">
      List of Packages in the Distribution
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installing-ravanos-on-soft-raid/" title="Installing RavanOS on Soft RAID">
      Installing RavanOS on Soft RAID
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-toggle md-nav__toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<a class="md-nav__link md-nav__link--active" href="./" title="Setup Swap Area">
      Setup Swap Area
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset"><a class="md-icon md-content__icon" download href="setup-swap-area.pdf" title="PDF Export"></a>
<a class="md-icon md-content__icon" href="https://github.com/ravanos/ravanos-wiki/edit/master/docs/setup-swap-area.md" title="Edit this page"></a>
<p>Swap area (swap): application and security features</p>
<p>The need to use swap</p>
<p>The presence of the swap area is an important component of the memory management system, and is necessary for the normal functioning of the system .</p>
<p>Wherein</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>n Acquiring backup RAM is not the primary purpose of paging.
Its main purpose is to ensure the effective release and balancing of the use of available memory.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In fact, using the swap space as an “extra backup volume” is an abnormal situation, and requires measures to expand the hardware.</p>
<p>n Linux-systems, there are different types of pages of RAM, each of which has its own characteristics, but two types are essential for understanding the need for paging:</p>
<ol>
<li>
<p>Pages that can be restored by re-reading this content from files (pages with commands of executable processes, caches of their file data), so-called file cache;</p>
</li>
<li>
<p>Pages of data on the distribution of memory between processes, the so-called. anonymous pages with no source files.</p>
</li>
</ol>
<p>And the main purpose of the swap area is to free space in the memory for the file cache by unloading irrelevant anonymous pages. Thus, deleting the swap area will not prevent an increase in the total number of disk operations when the RAM is full, but simply replaces the disk operations of crowding out anonymous pages with repeated ones disk file read operations. This is not only less effective, since the choice of pages to update is less, but, in turn, also leads to even more memory overflow.</p>
<p>Additionally, the swap area is usually used to organize sleep modes (hibernation or suspend to disk). When entering these modes in the swap area, a full copy of the RAM is saved. (In modern systems, you can provide a sleep mode without using the paging area, while preserving the contents of RAM in files).</p>
</div>
<p>Select and configure paging options</p>
<p>Placing swap areas: disk partition or file?</p>
<p>Modern Linux-based systems allow you to place the swap area in a dedicated disk partition, and in files. Regardless of the method of placement, modern versions of the Linux kernel provide approximately the same speed of paging, defining paging files, and using direct access to them. When working with disk drives, the fragmentation of these files can be a significant factor affecting the paging speed when working with files, so disk drives can be preferable for disk drives. When using solid-state drives file fragmentation is indifferent. In any case, the ability to dynamically disable / connect file swap areas makes it possible to efficiently use disk space by resizing the swap area as needed without interrupting system operation.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>When installing RavanOS, by default, the swap area is automatically created in a separate disk partition.
You can check where the swap area (s) are located (placed) with the command</p>
<p><code>sudo swapon</code></p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you need to check file fragmentation, use the filefrag command:</p>
<p><code>sudo filefrag -v /example.swap</code></p>
<p>To reduce file fragmentation in the Ext4 file system, use the e4defrag command:</p>
<p><code>sudo e4defrag -v /example.swap</code></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When placing files on solid-state drives, defragmentation does not make any sense.</p>
</div>
<p>Swap Area Size</p>
<p>In general, for RavanOS, the correct initial choice may be a 2-3GB swap area, followed by refinement based on the results of operation. If you intend to use the sleep mode ( hibernation or suspend to disk ) while preserving the RAM image, then the required volume depends on the RAM size, and in this case, a good initial version of the size of the swap area is a volume equal to the RAM size plus 2-3GB.</p>
<p>The main parameter for swapping is the value of the kernel parameter <code>vm.swappiness</code> , which determines the amount of free memory (in percent) at which page displacement begins. You can check the value of this parameter with the command:</p>
<div class="codehilite"><pre><span></span>```sudo sysctl vm.swappiness```
</pre></div>
<p>Swap setup</p>
<p>By default, the value of <code>vm.swappiness</code> is 60, i.e. paging out of memory pages begins when free memory becomes less than 60%.</p>
<p>It is believed that this value works well for most systems. You can change the value of the
<code>vm.swappiness</code> parameter by the command:</p>
<div class="codehilite"><pre><span></span>```sysctl -w vm.swappiness = &amp;lt;new_value&amp;gt;```
</pre></div>
<p>The minimum attribute value at which the swap will work is one.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you set the vm.swappiness parameter to zero, the swap is turned off completely.</p>
</div>
<p>Security data in the paging area
Memory pages that are dynamically copied from RAM to the paging space during computer operation may contain confidential information that is not covered by any protective transformations. Thus, having read access to the paging area creates the risk of leakage of confidential information.</p>
<p>A separate problem from the point of view of security is storage in the swap area of ​​the contents of the RAM of computers that are turned off. A copy of the contents of RAM can remain in the swap area:</p>
<ul>
<li>
<p>in case of unexpected shutdown of the computer as a result of a hardware failure;</p>
</li>
<li>
<p>in case of unexpected power failure;</p>
</li>
<li>
<p>and always remains there in computers that are in sleep mode.</p>
</li>
</ul>
<p>If there is physical access to the equipment, such data can be read regardless of the established discretionary and mandatory limitations.</p>
<p>Paging Security Guidelines
In RavanOS (Smolensk 1.6, Leningrad 8.1), the paging section created during system installation is automatically assigned a security label with maximum levels of confidentiality and integrity and the maximum set of access categories:</p>
<ul>
<li>
<p>Privacy Level 3;</p>
</li>
<li>
<p>Integrity level 63;</p>
</li>
<li>
<p>The set of access categories is complete.</p>
</li>
</ul>
<p>Thus, when installing RavanOS (Smolensk 1.6, Leningrad 8.1), unprivileged users are automatically protected from reading the swap space.</p>
<p>However, the system administrator has the option to add his own swap areas after installation <code>(see the mkswap / swapon / swapoff commands, as well as the swapon () / swapoff () system calls)</code>. At the same time, the operating system does not check the access rights set for the paging area being added, and the administrator should independently specify the necessary restrictions on discretionary and mandatory access rights. For example, the following command sequence can be used to place the paging space in the / swap_area file:</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<h1 id="create-a-1gb-file">create a 1Gb file<a class="headerlink" href="#create-a-1gb-file" title="Permanent link">¶</a></h1>
<p>sudo fallocate -l 1G /swap_area</p>
<h1 id="restrict-discretionary-access-rights-for-ravanos-se-ravanos-ce">restrict discretionary access rights (for RavanOS SE /RavanOS CE)<a class="headerlink" href="#restrict-discretionary-access-rights-for-ravanos-se-ravanos-ce" title="Permanent link">¶</a></h1>
<p><code>sudo chown root: root /swap_area</code>
<code>sudo chmod 600 /swap_area</code></p>
<h1 id="limit-mandated-access-rights-only-for-the-linux-operating-system-ch-se-the-ravanos">Limit mandated access rights (only for the Linux operating system CH SE the RavanOS)<a class="headerlink" href="#limit-mandated-access-rights-only-for-the-linux-operating-system-ch-se-the-ravanos" title="Permanent link">¶</a></h1>
<h1 id="-privacy-3">- privacy 3<a class="headerlink" href="#-privacy-3" title="Permanent link">¶</a></h1>
<h1 id="-integrity-level-63">- integrity level 63<a class="headerlink" href="#-integrity-level-63" title="Permanent link">¶</a></h1>
<h1 id="-open-all-cat-e-gorii-access">- open all cat e gorii access<a class="headerlink" href="#-open-all-cat-e-gorii-access" title="Permanent link">¶</a></h1>
<p>sudo pdpl-file 3: 63: -1 /swap_area</p>
<h1 id="_1"><a class="headerlink" href="#_1" title="Permanent link">¶</a></h1>
<p>mark up the swap area sudo mkswap / swap_area</p>
<h1 id="include-swap-space-in">include swap space in<a class="headerlink" href="#include-swap-space-in" title="Permanent link">¶</a></h1>
<p><code>sudo swapon /swap_area</code></p>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="../installing-ravanos-on-soft-raid/" rel="prev" title="Installing RavanOS on Soft RAID">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Installing RavanOS on Soft RAID
              </span>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright 2019 Chinthaka Deshapriya and RAVANOS.ORG
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
</div>
<div class="md-footer-social">
<link href="../assets/fonts/font-awesome.css" rel="stylesheet"/>
<a class="md-footer-social__link fa fa-globe" href="https://wiki.ravanos.org"></a>
<a class="md-footer-social__link fa fa-github-alt" href="https://docs.ravanos.org"></a>
</div>
</div>
</div>
</footer>
</div>
<script src="../assets/javascripts/application.d9aa80ab.js"></script>
<script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
<script src="../clients.js"></script>
</body>
</html>